<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jagannath Wellness - AWPL Billing</title>
  <link rel="stylesheet" href="style.css" />
  <script src="auth.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>** Jagannath Wellness - Odisha's top AWPL Franchise **</h1>
            <button id="logout-btn" class="logout-btn" title="Logout">Logout
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
            </button>
        </div>
    </header>
<h1>JW - Billing Dashboard</h1>
<input type="text" id="customer-name" placeholder="Enter customer name" autocomplete="off" />
<input type="text" id="product-search" placeholder="Search products" autocomplete="off" />
<input type="number" id="product-quantity" placeholder="Enter quantity"/>
<h2>     </h2>
<button id="add-product">Add to cart</button>
<div id="dropdown" class="dropdown"></div>

<h2>Order Summary</h2>
<div id="order-summary" class="order-summary"></div>
<p style="font-size: 12px; color: #555;">Click "Remove from Cart" to delete a product from the cart before placing the order.</p>
<div id="total-cost" class="total-cost">Total Cost: 0</div>
<div id="total-sp" class="total-sp">Total SP: 0</div>
<!-- Place Order Button -->
<button id="place-order">Place Order</button>

<h2>Edit Existing Order</h2>
<input type="number" id="edit-order-number" placeholder="Enter order number" />
<h2>     </h2>
<button id="fetch-order-to-edit">Edit Order</button>

<div id="edit-order-section" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: none;">
  <h3 style="margin-top: 0; color: #2c3e50; border-bottom: 1px solid #dee2e6; padding-bottom: 10px;">Editing Order #<span id="editing-order-number"></span></h3>
  <div id="edit-order-summary" class="order-summary" style="margin-bottom: 15px;"></div>
  <div id="edit-total-cost" class="total-cost" style="font-weight: bold; margin: 10px 0;"></div>
  <div id="edit-total-sp" class="total-sp" style="font-weight: bold; margin-bottom: 15px;"></div>
  <div style="display: flex; gap: 10px;">
    <button id="save-edited-order" style="flex: 1; background-color: #28a745;">Save Changes</button>
    <button id="cancel-edit" style="flex: 1; background-color: #dc3545;">Cancel</button>
  </div>
</div>


<h2>     </h2>
<input type="number" id="order-number" placeholder="Enter order number" autocomplete="off" />
<h2>     </h2>
<button id="download-order-details">Download Order Details</button>

<!-- Add New Product Section -->
<h2>Add New Product</h2>
<div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 10px;">
  <input type="text" id="new-product-name" placeholder="Product Name" />
  <input type="number" id="new-product-price" placeholder="Price" />
  <input type="number" id="new-product-mrp" placeholder="MRP" />
  <input type="number" id="new-product-sp" placeholder="SP" />
</div>
<button id="add-new-product">Add Product</button>

<!-- Delete Product Section -->
<h2>Delete a Product</h2>
<input type="text" id="delete-product-input" placeholder="Type product name to delete" autocomplete="off" style="width: 400px; height: 30px;" />

<div id="delete-product-dropdown" class="dropdown"></div>



<!-- Order History Section -->
<div class="order-history-container">
    <h2>Order History</h2>
    <div class="date-search-container">
        <input type="date" id="order-date-search" class="date-picker" />
        <button id="get-orders">Get Orders</button>
    </div>
    <p class="hint-text">Leave empty to see the latest 100 orders, or select a date to filter</p>
</div>

<!-- Display Last 50  approved Orders -->
<div id="order-history"></div>

    <hr />
    <h1>JW - Customer Management</h1>

    <!-- Add new customer -->
    <div style="margin-bottom:12px;">
        <input type="text" id="new-customer-name" placeholder="Customer name" />
        <input type="text" id="new-customer-phone" placeholder="Phone (optional)" />
        <input type="number" id="new-customer-balance" placeholder="Balance Not Paid (₹)" step="0.01" />
        <input type="number" id="new-customer-sp" placeholder="SP Due" step="0.0001" />
        <h2>     </h2>
        <button id="add-customer-btn">Add Customer</button>
    </div>

    <!-- Search + summary -->
    <div style="margin-bottom:12px;">
        <input type="text" id="customer-search" placeholder="Enter name or phone" autocomplete="off" />
        <h2>     </h2>
        <div id="customer-search-dropdown" class="dropdown"></div>
        <button id="load-customer-btn">Load Customer</button>
    </div>

    <div id="customer-summary" style="display:none; margin-bottom:20px;">
        <h3 id="customer-summary-header" style="margin-bottom: 15px; color: #2c3e50;"></h3>
        <table class="balance-summary">
            <tr>
                <td class="balance-label">Balance Not Paid</td>
                <td class="balance-value" id="customer-current-bal">-</td>
                <td class="balance-spacer"></td>
                <td class="balance-label">SP Not Used</td>
                <td class="balance-value" id="customer-current-sp">-</td>
            </tr>
        </table>
    </div>

    <!-- Actions -->
    <div id="customer-activity-panel" style="display:none; margin-bottom:20px;">
        <div class="button-columns">
            <div class="button-column">
                <h3 class="section-header">Payment Received</h3>
                <input type="number" id="activity-payment-amount" placeholder="Payment (₹)" step="0.01" />
                <input type="text" id="payment-note" placeholder="Payment Note" />
                <button id="record-payment-btn">Amount Received</button>
                <input type="number" id="activity-sp-amount" placeholder="SP Used" step="0.0001" />
                <input type="text" id="sp-used-note" placeholder="SP Used Note" />
                <button id="record-sp-btn">SP Used</button>
            </div>
            <div class="button-column">
                <h3 class="section-header">Cost of Products</h3>
                <input type="number" id="add-balance-amount" placeholder="Add to Balance Not Paid" step="0.01" />
                <input type="text" id="order-note" placeholder="Order Note" />
                <button id="add-balance-btn" class="add-btn">Balance Not Paid</button>
                <input type="number" id="add-sp-amount" placeholder="SP Not Used" step="0.0001" />
                <input type="text" id="sp-notused-note" placeholder="SP Not Used Note" />
                <button id="add-sp-btn" class="add-btn">SP Not Used</button>
            </div>
        </div>
    </div>

    <!-- History -->
    <h4>Activity History</h4>
    <div class="table-container">
        <div id="customer-activity-history"></div>
    </div>


<script src="app.js"></script>
<script src="customer-management.js"></script>
</body>
</html>
